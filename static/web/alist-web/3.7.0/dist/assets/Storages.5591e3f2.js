import{u as $,a as h,b6 as i,e,H as C,a6 as _,$ as g,bc as m,bv as p,aA as x,X as v,B as o,aM as B,bd as b,n as f,V as k,d as y,c0 as M,t as D}from"./index.56603356.js";import{u as S}from"./useT.303c7e81.js";import{b as L}from"./useTitle.f1b35a2e.js";import{D as T}from"./DeletePopover.55139cd3.js";const A=t=>{const r=S(),{to:l}=$(),[c,d]=h(()=>i.post(`/admin/storage/delete?id=${t.storage.id}`)),[u,a]=h(()=>i.post(`/admin/storage/${t.storage.disabled?"enable":"disable"}?id=${t.storage.id}`));return e(k,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return C("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${_()}`}},get children(){return[e(g,{spacing:"$2",get children(){return[e(m,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return t.storage.mount_path}}),e(p,{colorScheme:"info",get children(){return r(`drivers.drivers.${t.storage.driver}`)}})]}}),e(g,{get children(){return[e(m,{get children(){return[x(()=>r("storages.common.status")),":\xA0"]}}),e(v,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return t.storage.status}})]}}),e(m,{css:{wordBreak:"break-all"},get children(){return t.storage.remark}}),e(g,{spacing:"$2",get children(){return[e(o,{onClick:()=>{l(`/@manage/storages/edit/${t.storage.id}`)},get children(){return r("global.edit")}}),e(o,{get loading(){return u()},colorScheme:"warning",onClick:async()=>{const n=await a();B(n,()=>{t.refresh()})},get children(){return r(`global.${t.storage.disabled?"enable":"disable"}`)}}),e(T,{get name(){return t.storage.mount_path},get loading(){return c()},onClick:async()=>{const n=await d();b(n,()=>{f.success(r("global.delete_success")),t.refresh()})}})]}})]}})},O=()=>{const t=S();L("manage.sidemenu.storages");const{to:r}=$(),[l,c]=h(()=>i.get("/admin/storage/list")),[d,u]=y([]),a=async()=>{const s=await c();b(s,w=>u(w.content))};a();const n=async()=>{const s=await i.post("/admin/storage/load_all");b(s,()=>{f.success(t("storages.common.start_load_success"))})};return e(k,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[e(g,{spacing:"$2",get children(){return[e(o,{colorScheme:"accent",get loading(){return l()},onClick:a,get children(){return t("global.refresh")}}),e(o,{onClick:()=>{r("/@manage/storages/add")},get children(){return t("global.add")}}),e(o,{colorScheme:"warning",get loading(){return l()},onClick:n,get children(){return t("storages.common.load_all")}})]}}),e(M,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return e(D,{get each(){return d()},children:s=>e(A,{storage:s,refresh:a})})}})]}})};export{O as default};
