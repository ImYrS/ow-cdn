import{f as e,a7 as s,ah as p,e as x,t as m,aF as $,W as d,aE as k,aH as I,cq as l,ak as _,m as n,bH as v,af as C,ag as y,v as c,o as u,c4 as M,l as g,bs as E}from"./index.2e73a62d.js";import{b as L}from"./Folder.4afe69c8.js";import{a as S,M as F}from"./Layout.03b25816.js";import{c as G,a as H}from"./useUtil.5b859d59.js";import{I as O}from"./ImageWithError.ceda5f3a.js";import{O as z,g as A}from"./icon.d754328b.js";import{G as W}from"./GridItem.8ef3a61d.js";import"./Paginator.8ff9ff23.js";import"./index.540ec8e2.js";import"./index.8d91172c.js";import"./api.c9827e00.js";import"./Markdown.abc681c1.js";import"./index.6576c5b7.js";import"./FolderTree.7b1f73f3.js";const P=t=>{const{isHide:r}=G();if(r(t.obj)||t.obj.type!==z.IMAGE)return null;const{setPathAs:a}=S(),h=e(p,{get color(){return s()},boxSize:"$12",get as(){return A(t.obj)}}),[b,i]=x(!1),f=m(()=>$()&&(b()||t.obj.selected)),{show:w}=L({id:1}),{rawLink:j}=H();return e(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(d,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${s()}`}},onMouseEnter:()=>{i(!0),a(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{i(!1)},onContextMenu:o=>{k(()=>{I(!1),l(t.index,!0,!0)}),w(o,{props:t.obj})},get children(){return e(_,{w:"$full",pos:"relative",get children(){return[e(n,{get when(){return f()},get children(){return e(v,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:o=>{l(t.index,o.target.checked)}})}}),e(O,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(C,{size:"lg"})},fallbackErr:h,get src(){return j(t.obj)},loading:"lazy",onClick:()=>{y.emit("gallery",t.obj.name)}})]}})}})}})},ee=()=>{const t=m(()=>e(M,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(c,{get each(){return u.objs.filter(r=>r.is_dir)},children:(r,a)=>e(W,{obj:r,get index(){return a()}})})}}));return e(d,{spacing:"$2",w:"$full",get children(){return[e(n,{get when(){return g.show_folder_in_image_view==="top"},get children(){return t()}}),e(E,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(c,{get each(){return u.objs},children:(r,a)=>e(P,{obj:r,get index(){return a()}})})}}),e(n,{get when(){return g.show_folder_in_image_view==="bottom"},get children(){return t()}})]}})};export{ee as default};
