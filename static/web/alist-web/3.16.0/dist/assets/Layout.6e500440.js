import{u as A,a as R,_ as nt,g as Kt,b as Gt,o as M,p as Be,O as k,S as $,h as Ct,c as On,n as K,d as S,s as le,l as Xt,e as re,f as n,M as he,i as ge,j as fe,k as me,m as _,I as Pe,T as rt,F as Qt,q as Me,B as V,r as pe,V as oe,t as _e,v as ke,w as ae,x as ze,y as En,z as Tn,A as An,C as Zt,L as Jt,D as Fn,E as Pn,G as Rn,H as ce,J as Oe,K as Ee,N as He,P as Yt,Q as dt,R as ht,U as Re,W as gt,X as U,Y as jn,Z as Dn,$ as Te,a0 as In,a1 as Ln,a2 as q,a3 as Vn,a4 as je,a5 as De,a6 as ft,a7 as Bn,a8 as $e,a9 as Ke,aa as mt,ab as ne,ac as en,ad as zn,ae as pt,af as Hn,ag as Un,ah as v,ai as vt,aj as Ie,ak as Ge,al as tn,am as Q,an as Nn,ao as qn,ap as Wn,aq as Ue,ar as nn,as as Kn,at as O,au as F,av as rn,aw as on,ax as Gn,ay as Xn,az as Qn,aA as $t,aB as an,aC as Zn,aD as Jn,aE as Yn,aF as er,aG as tr,aH as nr,aI as _t,aJ as rr,aK as or,aL as ar,aM as ir,aN as B,aO as sr,aP as lr,aQ as cr,aR as ur,aS as dr,aT as hr,aU as gr,aV as fr,aW as mr,aX as pr,aY as vr,aZ as br,a_ as wr,a$ as yr,b0 as Cr,b1 as $r}from"./index.6067d580.js";import{u as _r,B as sn,a as ln,b as Sr,c as xr}from"./index.c51923b9.js";import{M as cn}from"./Markdown.8908d255.js";import{f as Mr,a as kr,b as Or,c as Er,d as Tr,e as Ar,g as Fr,h as Pr,i as Rr,j as jr,k as Dr,l as Ir,o as Lr}from"./api.286efe05.js";import{u as Vr,a as un,b as Br}from"./useUtil.c0c2d0a2.js";import{A as zr,F as dn,C as Hr,a as Ur,B as Nr,b as qr,T as Wr,c as St}from"./index.fcff81e1.js";import{R as Kr}from"./index.cfe5736a.js";import{M as bt}from"./FolderTree.ac6afc55.js";const Gr=(e,...t)=>{},ot=new Map,Xr=(e,t)=>{ot.set(e,t)},hn=e=>{window.scroll({top:ot.get(e)||0,behavior:"smooth"}),Gr("recoverScroll",e,ot.get(e))};let Ae;function Qr(e,t,r="replaceState"){let o=r==="location"?location.href:location.hash;if(!o.includes("?"))o=`${o}?${e}=${t}`;else if(!o.includes(e))o=`${o}&${e}=${t}`;else{const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;o=o.replace(new RegExp(a),"$1"+e+"="+t+"$3")}r==="location"&&(location.href=o),r==="pushState"&&history.pushState({},"",o),r==="replaceState"&&history.replaceState({},"",o)}function xt(e){for(var t=window.location.search.substring(1),r=t.split("&"),o=0;o<r.length;o++){var a=r[o].split("=");if(a[0]==e)return a[1]}return""}const Xe={};let z=1;const li=()=>z,Zr=()=>{const e=Kt();z=1,e.type==="pagination"&&Qr("page",1),console.log("resetGlobalPage",z)},j=()=>{const{pathname:e}=A(),[,t]=R(d=>Mr(d,nt())),r=Kt();r.type==="pagination"&&xt("page")&&(z=parseInt(xt("page")));const[,o]=R(d=>{const h={index:d==null?void 0:d.index,size:d==null?void 0:d.size};return kr(d==null?void 0:d.path,nt(),h.index,h.size,d==null?void 0:d.force,new Gt.CancelToken(function(b){Ae=b}))}),a=(d,h=!0,f=!1)=>{f&&(d=Be(e(),d)),h?Xe[d]=!0:delete Xe[d]};let s=!1;const i=(d,h,f)=>{Ae==null||Ae(),s=h!=null?h:!1,c(""),Xe[d]?u(d,z,void 0,void 0,f):l(d)},l=async d=>{k.setState($.FetchingObj);const h=await t(d);Ct(h,f=>{var b;k.setObj(f),k.setProvider(f.provider),f.is_dir?(a(d),u(d,z)):(k.setReadme(f.readme),k.setRelated((b=f.related)!=null?b:[]),k.setRawUrl(f.raw_url),k.setState($.File))},c)},u=async(d,h,f,b=!1,p)=>{f||(f=r.size),f!==void 0&&r.type==="all"&&(f=void 0),z=h!=null?h:1,k.setState(b?$.FetchingMore:$.FetchingObjs);const w=await o({path:d,index:h,size:f,force:p});Ct(w,C=>{var E;b?On(C.content):(k.setObjs((E=C.content)!=null?E:[]),k.setTotal(C.total)),k.setReadme(C.readme),k.setWrite(C.write),k.setProvider(C.provider),k.setState($.Folder),b&&(h!=null?h:1)>1||hn(d)},c)},c=(d,h)=>{h===403?(k.setState($.NeedPassword),s&&K.error(d)):k.setErr(d)},g=(d,h,f=!1)=>{u(e(),d,h,f)};return{handlePathChange:i,setPathAs:a,refresh:(d,h)=>{i(e(),d,h)},pageChange:g,loadMore:()=>{g(z+1,void 0,!0)},allLoaded:()=>z>=Math.ceil(M.total/r.size)}},Jr=()=>{const{rawLinks:e}=Vr(),{rawLink:t}=un(),r=S();return{batchDownloadSelected:()=>{e(!0).forEach(a=>{window.open(a,"_blank")})},sendToAria2:async()=>{const o=le().filter(l=>!l.is_dir),{aria2_rpc_url:a,aria2_rpc_secret:s,aria2_dir:i}=Xt;if(!a){K.warning(r("home.toolbar.aria2_not_set"));return}try{for(const l of o){const u=await Gt.post(a,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+s,[t(l)],{out:l.name,"check-certificate":"false"}]});console.log(u)}K.success(r("home.toolbar.send_aria2_success"))}catch(l){console.error(l),K.error(`failed to send to aria2: ${l}`)}}}},Ne=e=>{var s;const[t,r]=re((s=e.defaultValue)!=null?s:""),o=S(),a=()=>{var i;if(!t()){K.warning(o("global.empty_input"));return}(i=e.onSubmit)==null||i.call(e,t()),r("")};return n(pe,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[n(he,{}),n(ge,{get children(){return[n(fe,{get children(){return o(e.title)}}),n(me,{get children(){return[n(_,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(_,{get when(){return e.type==="text"},get fallback(){return n(Pe,{id:"modal-input",get type(){return e.type},get value(){return t()},onInput:i=>{r(i.currentTarget.value)},onKeyDown:i=>{i.key==="Enter"&&a()}})},get children(){return n(rt,{id:"modal-input",get value(){return t()},onInput:i=>{r(i.currentTarget.value)}})}}),n(_,{get when(){return e.tips},get children(){return n(Qt,{get children(){return e.tips}})}})]}}),n(Me,{display:"flex",gap:"$2",get children(){return[n(V,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),n(V,{get loading(){return e.loading},onClick:()=>a(),get children(){return o("global.ok")}})]}})]}})]}})},Yr=ke("<div></div>"),eo=e=>{var l,u;const[t,r]=re((l=e.defaultValue1)!=null?l:""),[o,a]=re((u=e.defaultValue2)!=null?u:""),s=S(),i=()=>{var c;if(!t()||!o()){K.warning(s("global.empty_input"));return}(c=e.onSubmit)==null||c.call(e,t(),o()),r(""),a("")};return n(pe,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input1",get children(){return[n(he,{}),n(ge,{get children(){return[n(fe,{get children(){return s(e.title)}}),n(me,{get children(){return[n(_,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(_,{get when(){return e.type==="text"},get fallback(){return n(oe,{spacing:"$2",get children(){return[n(Pe,{id:"modal-input1",get type(){return e.type},get value(){return t()},onInput:c=>{r(c.currentTarget.value)},onKeyDown:c=>{c.key==="Enter"&&i()}}),n(Pe,{id:"modal-input2",get type(){return e.type},get value(){return o()},onInput:c=>{a(c.currentTarget.value)},onKeyDown:c=>{c.key==="Enter"&&i()}})]}})},get children(){const c=Yr.cloneNode(!0);return _e(c,n(rt,{id:"modal-input1",get value(){return t()},onInput:g=>{r(g.currentTarget.value)}}),null),_e(c,n(rt,{id:"modal-input2",get value(){return o()},onInput:g=>{a(g.currentTarget.value)}}),null),c}}),n(_,{get when(){return e.tips},get children(){return n(Qt,{get children(){return e.tips}})}})]}}),n(Me,{display:"flex",gap:"$2",get children(){return[n(V,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return s("global.cancel")}}),n(V,{get loading(){return e.loading},onClick:()=>i(),get disabled(){return!t()||!o()},get children(){return s("global.ok")}})]}})]}})]}})},to=()=>{const{pathname:e}=A(),t=ae(()=>["",...e().split("/").filter(Boolean)]),r=S(),{setPathAs:o}=j();return n(Rn,{class:"nav",w:"$full",get children(){return n(ze,{get each(){return t()},children:(a,s)=>{const i=ae(()=>s()===t().length-1),l=t().slice(0,s()+1).join("/"),u=En(l);let c=()=>a;return c()===""&&(c=()=>ce("home_icon")+r("manage.sidemenu.home")),n(Tn,{class:"nav-item",get children(){return[n(An,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:Zt(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return i()},get as(){return i()?void 0:Jt},get href(){return Fn(u)},onMouseEnter:()=>o(l),children:c}),n(_,{get when(){return!i()},get children(){return n(Pn,{class:"nav-separator"})}})]}})}})}})},no=Oe(()=>Ee(()=>import("./Folder.867e0130.js").then(e=>e.F),["assets/Folder.867e0130.js","assets/Folder.b511ba9e.css","assets/index.6067d580.js","assets/index.15d8d646.css","assets/useUtil.c0c2d0a2.js","assets/api.286efe05.js","assets/Paginator.e7a1a33c.js","assets/index.fcff81e1.js","assets/icon.f1110313.js","assets/index.c51923b9.js"])),ro=Oe(()=>Ee(()=>import("./File.cba1024e.js").then(e=>e.a),["assets/File.cba1024e.js","assets/index.6067d580.js","assets/index.15d8d646.css","assets/useUtil.c0c2d0a2.js","assets/api.286efe05.js","assets/icon.f1110313.js","assets/index.c51923b9.js","assets/index.fcff81e1.js"])),oo=Oe(()=>Ee(()=>import("./Password.873ffe26.js"),["assets/Password.873ffe26.js","assets/index.6067d580.js","assets/index.15d8d646.css","assets/index.fcff81e1.js","assets/index.c51923b9.js","assets/Markdown.8908d255.js","assets/api.286efe05.js","assets/useUtil.c0c2d0a2.js","assets/index.cfe5736a.js","assets/FolderTree.ac6afc55.js"]));let Mt=!0;const ao=()=>{const e=He("white","$neutral3"),{pathname:t}=A(),{handlePathChange:r}=j();let o=t();return Yt(dt(t,a=>{_r(),Mt||Zr(),Mt=!1,Xr(o,window.scrollY),r(a),o=a})),n(oe,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return n(ht,{get fallback(){return n(Re,{})},get children(){return n(gt,{get children(){return[n(U,{get when(){return M.err},get children(){return n(jn,{get msg(){return M.err},disableColor:!0})}}),n(U,{get when(){return[$.FetchingObj,$.FetchingObjs].includes(M.state)},get children(){return n(Re,{})}}),n(U,{get when(){return M.state===$.NeedPassword},get children(){return n(oo,{})}}),n(U,{get when(){return[$.Folder,$.FetchingMore].includes(M.state)},get children(){return n(no,{})}}),n(U,{get when(){return M.state===$.File},get children(){return n(ro,{})}})]}})}})}})},io=()=>{const e=He("white","$neutral3"),{proxyLink:t}=un(),{pathname:r}=A(),o=ae(dt(()=>M.state,()=>{if(![$.FetchingMore,$.Folder,$.File].includes(M.state))return"";if(M.readme)return M.readme;if([$.FetchingMore,$.Folder].includes(M.state)){const i=M.objs.find(l=>l.name.toLowerCase()==="readme.md");if(i)return t(i,!0)}return""})),a=async i=>{let l={content:i};return/^https?:\/\//g.test(i)&&(l=await Or(i)),setTimeout(()=>{hn(r())}),l},[s]=Dn(o,a);return n(_,{get when(){return o()},get children(){return n(Te,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return e()},shadow:"$lg",get children(){return n(In,{get loading(){return s.loading},get children(){return n(cn,{get children(){var i;return(i=s())==null?void 0:i.content}})}})}})}})},gn=e=>{const t=ce("home_container");return n(gt,{get fallback(){return n(Te,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return n(U,{when:t==="hope_container",get children(){return n(Ln,{get children(){return e.children}})}})}})},so=()=>n(gn,{get children(){return n(oe,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[n(to,{}),n(ao,{}),n(io,{})]}})}}),lo=ke("<span>|</span>"),co=()=>{const e=S();return n(oe,{class:"footer",w:"$full",py:"$4",get children(){return n(q,{spacing:"$1",get children(){return[n(Vn,{href:"https://github.com/Xhofe/alist",external:!0,get children(){return e("home.footer.powered_by")}}),lo.cloneNode(!0),n(zr,{as:Jt,get href(){return je.is_guest(De())?"/@login":"/@manage"},get children(){return e(je.is_guest(De())?"login.login":"home.footer.manage")}})]}})}})},kt={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},ve="^\\s*",be="\\s*$",Y="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",ee="([0-9A-Fa-f])",te="([0-9A-Fa-f]{2})",uo=new RegExp(`${ve}rgb\\s*\\(${Y},${Y},${Y}\\)${be}`),ho=new RegExp(`${ve}rgba\\s*\\(${Y},${Y},${Y},${Y}\\)${be}`),go=new RegExp(`${ve}#${ee}${ee}${ee}${be}`),fo=new RegExp(`${ve}#${te}${te}${te}${be}`),mo=new RegExp(`${ve}#${ee}${ee}${ee}${ee}${be}`),po=new RegExp(`${ve}#${te}${te}${te}${te}${be}`);function T(e){return parseInt(e,16)}function fn(e){try{let t;if(t=fo.exec(e))return[T(t[1]),T(t[2]),T(t[3]),1];if(t=uo.exec(e))return[H(t[1]),H(t[5]),H(t[9]),1];if(t=ho.exec(e))return[H(t[1]),H(t[5]),H(t[9]),Qe(t[13])];if(t=go.exec(e))return[T(t[1]+t[1]),T(t[2]+t[2]),T(t[3]+t[3]),1];if(t=po.exec(e))return[T(t[1]),T(t[2]),T(t[3]),Qe(T(t[4])/255)];if(t=mo.exec(e))return[T(t[1]+t[1]),T(t[2]+t[2]),T(t[3]+t[3]),Qe(T(t[4]+t[4])/255)];if(e in kt)return fn(kt[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function vo(e){return e>1?1:e<0?0:e}function Ot(e,t,r,o){return`rgba(${H(e)}, ${H(t)}, ${H(r)}, ${vo(o)})`}function Et(e,t){const[r,o,a,s=1]=Array.isArray(e)?e:fn(e);return t.alpha?Ot(r,o,a,t.alpha):Ot(r,o,a,s)}function Qe(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function H(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const bo={list:dn,grid:sn,image:ln},wo=()=>{const e=S();return n(pt,{get children(){return[n(ft,{as:Bn,get color(){return $e()},get bgColor(){return Et($e(),{alpha:.15})},get _hover(){return{bgColor:Et($e(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return n(gt,{get children(){return[n(U,{get when(){return Ke()==="list"},get children(){return n(dn,{})}}),n(U,{get when(){return Ke()==="grid"},get children(){return n(sn,{})}}),n(U,{get when(){return Ke()==="image"},get children(){return n(ln,{})}})]}})}}),n(mt,{get children(){return n(ze,{get each(){return Object.entries(bo)},children:t=>n(ne,{get icon(){return n(en,{get component(){return t[1]}})},onSelect:()=>{zn(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},qe=typeof window<"u"?window.navigator.userAgent:"";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(qe);/^((?!chrome|android).)*safari/i.test(qe);/MicroMessenger/i.test(qe);/MSIE|Trident/i.test(qe);var Nt,qt,Wt;const yo=(Wt=(qt=(Nt=window==null?void 0:window.navigator)==null?void 0:Nt.platform)!=null?qt:"")==null?void 0:Wt.includes("Mac"),Co=()=>{const e=ce("logo").split(`
`),t=He(e[0],e.pop());return n(tn,{class:"header",w:"$full",get children(){return n(gn,{get children(){return n(q,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[n(q,{class:"header-left",h:"44px",get children(){return n(Hn,{get src(){return t()},h:"$full",w:"auto",get fallback(){return n(Un,{})}})}}),n(q,{class:"header-right",spacing:"$2",get children(){return n(_,{get when(){return M.state===$.Folder},get children(){return[n(_,{get when(){return ce("search_index")!=="none"},get children(){return n(q,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{v.emit("tool","search")},get children(){return[n(vt,{as:Sr}),n(q,{get children(){return[Ie(()=>yo?n(Ge,{children:"Cmd"}):n(Ge,{children:"Ctrl"})),n(Ge,{children:"K"})]}})]}})}}),n(wo,{})]}})}})]}})}})}})};function $o(e){return Q({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function _o(e){return Q({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)}function ci(e){return Q({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5"/>'},e)}function So(e){return Q({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)}function xo(e){return Q({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)}function Mo(e){return Q({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)}function ui(e){return Q({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 005 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 001.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 00-2.025-3.276l.5-1.001a.5.5 0 00-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 00-2.84 0l-.13.052L5.948.276a.5.5 0 00-.895.447l.5 1.001A4.499 4.499 0 003.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 01-.001-1h.002A.5.5 0 016.5 4zm3 0a.5.5 0 01-.001-1h.003a.5.5 0 01-.001 1z"/>'},e)}function ko(e){return Q({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>'},e)}const W={rename:{icon:Hr,color:"$accent9"},copy:{icon:_o,color:"$success9"},move:{icon:So,color:"$warning9"},delete:{icon:Nn,color:"$danger9"},copy_link:{icon:xo,color:"$info9"},mkdir:{icon:Ur,p:!0},recursive_move:{icon:Mo,p:!0},remove_empty_directory:{icon:ko,p:!0},regex_rename:{icon:Nr,p:!0},new_file:{icon:qr,p:!0},cancel_select:{icon:Wr},download:{icon:qn,color:"$primary9"}},Le=e=>{const t=Wn.findIndex(o=>o===e.name);if(t!==-1&&!je.can(De(),t))return null;const r=S();return n(nn,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return n(vt,Ue({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:Zt()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=W[e.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=W[e.name])==null?void 0:o.icon},get color(){var o;return(o=W[e.name])==null?void 0:o.color}},e))}})},P=e=>{const t=S();return n(nn,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return n(vt,Ue({get color(){return $e()},get _hover(){return{bgColor:$e(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},Oo=()=>{const e=S(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=Br(),o="neutral";return n(pt,{placement:"top",offset:10,get children(){return[n(ft,{as:Le,name:"copy_link"}),n(mt,{get children(){return[n(ne,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),n(ne,{colorScheme:o,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),n(ne,{colorScheme:o,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},Eo=ke("<p></p>"),To=()=>{const e=S(),t="neutral",{batchDownloadSelected:r,sendToAria2:o}=Jr();return n(pt,{placement:"top",offset:10,get children(){return[n(ft,{as:Le,name:"download"}),n(mt,{get children(){return[n(ne,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),n(_,{get when(){return je.is_admin(De())||Kn("package_download")},get children(){return n(ne,{colorScheme:t,onSelect:()=>{v.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),n(ne,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},Ao=Oe(()=>Ee(()=>import("./PackageDownload.1a953d45.js"),["assets/PackageDownload.1a953d45.js","assets/index.6067d580.js","assets/index.15d8d646.css","assets/api.286efe05.js","assets/useUtil.c0c2d0a2.js"])),Fo=()=>{const e=S(),t=l=>{l==="package_download"&&o()};v.on("tool",t),O(()=>{v.off("tool",t)});const{isOpen:r,onOpen:o,onClose:a}=F(),[s,i]=re("pre_tips");return n(pe,{blockScrollOnMount:!1,get opened(){return r()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[n(he,{}),n(ge,{get children(){return[n(fe,{get children(){return e("home.toolbar.package_download")}}),n(ht,{get fallback(){return n(Re,{})},get children(){return n(_,{get when(){return s()==="pre_tips"},get fallback(){return n(Ao,{onClose:a})},get children(){return[n(me,{get children(){const l=Eo.cloneNode(!0);return _e(l,()=>e("home.toolbar.pre_package_download-tips")),l}}),n(Me,{display:"flex",gap:"$2",get children(){return[n(V,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(V,{colorScheme:"info",onClick:()=>{i("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function mn(e,t){e.indexOf(t)===-1&&e.push(t)}function Po(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const pn=(e,t,r)=>Math.min(Math.max(r,e),t),L={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Se=e=>typeof e=="number",se=e=>Array.isArray(e)&&!Se(e[0]),Ro=(e,t,r)=>{const o=t-e;return((r-e)%o+o)%o+e};function jo(e,t){return se(e)?e[Ro(0,e.length,t)]:e}const vn=(e,t,r)=>-r*e+r*t+e,bn=()=>{},G=e=>e,wt=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function wn(e,t){const r=e[e.length-1];for(let o=1;o<=t;o++){const a=wt(0,t,o);e.push(vn(r,1,a))}}function Do(e){const t=[0];return wn(t,e-1),t}function Io(e,t=Do(e.length),r=G){const o=e.length,a=o-t.length;return a>0&&wn(t,a),s=>{let i=0;for(;i<o-2&&!(s<t[i+1]);i++);let l=pn(0,1,wt(t[i],t[i+1],s));return l=jo(r,i)(l),vn(e[i],e[i+1],l)}}const yn=e=>Array.isArray(e)&&Se(e[0]),at=e=>typeof e=="object"&&Boolean(e.createAnimation),xe=e=>typeof e=="function",Lo=e=>typeof e=="string",Ze={ms:e=>e*1e3,s:e=>e/1e3},Cn=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Vo=1e-7,Bo=12;function zo(e,t,r,o,a){let s,i,l=0;do i=t+(r-t)/2,s=Cn(i,o,a)-e,s>0?r=i:t=i;while(Math.abs(s)>Vo&&++l<Bo);return i}function ye(e,t,r,o){if(e===t&&r===o)return G;const a=s=>zo(s,0,1,e,r);return s=>s===0||s===1?s:Cn(a(s),t,o)}const Ho=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const o=r*e,a=t==="end"?Math.floor(o):Math.ceil(o);return pn(0,1,a/e)},Tt={ease:ye(.25,.1,.25,1),"ease-in":ye(.42,0,1,1),"ease-in-out":ye(.42,0,.58,1),"ease-out":ye(0,0,.58,1)},Uo=/\((.*?)\)/;function At(e){if(xe(e))return e;if(yn(e))return ye(...e);if(Tt[e])return Tt[e];if(e.startsWith("steps")){const t=Uo.exec(e);if(t){const r=t[1].split(",");return Ho(parseFloat(r[0]),r[1].trim())}}return G}class No{constructor(t,r=[0,1],{easing:o,duration:a=L.duration,delay:s=L.delay,endDelay:i=L.endDelay,repeat:l=L.repeat,offset:u,direction:c="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=G,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((d,h)=>{this.resolve=d,this.reject=h}),o=o||L.easing,at(o)){const d=o.createAnimation(r);o=d.easing,r=d.keyframes||r,a=d.duration||a}this.repeat=l,this.easing=se(o)?G:At(o),this.updateDuration(a);const g=Io(r,u,se(o)?o.map(At):G);this.tick=d=>{var h;s=s;let f=0;this.pauseTime!==void 0?f=this.pauseTime:f=(d-this.startTime)*this.rate,this.t=f,f/=1e3,f=Math.max(f-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(f=this.totalDuration);const b=f/this.duration;let p=Math.floor(b),w=b%1;!w&&b>=1&&(w=1),w===1&&p--;const C=p%2;(c==="reverse"||c==="alternate"&&C||c==="alternate-reverse"&&!C)&&(w=1-w);const E=f>=this.totalDuration?1:Math.min(w,1),x=g(this.easing(E));t(x),this.pauseTime===void 0&&(this.playState==="finished"||f>=this.totalDuration+i)?(this.playState="finished",(h=this.resolve)===null||h===void 0||h.call(this,x)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class qo{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Je=new WeakMap;function $n(e){return Je.has(e)||Je.set(e,{transforms:[],values:new Map}),Je.get(e)}function Wo(e,t){return e.has(t)||e.set(t,new qo),e.get(t)}const Ko=["","X","Y","Z"],Go=["translate","scale","rotate","skew"],ue={x:"translateX",y:"translateY",z:"translateZ"},Ft={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},Xo={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:Ft,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:G},skew:Ft},de=new Map,We=e=>`--motion-${e}`,Ve=["x","y","z"];Go.forEach(e=>{Ko.forEach(t=>{Ve.push(e+t),de.set(We(e+t),Xo[e])})});const Qo=(e,t)=>Ve.indexOf(e)-Ve.indexOf(t),Zo=new Set(Ve),yt=e=>Zo.has(e),Jo=(e,t)=>{ue[t]&&(t=ue[t]);const{transforms:r}=$n(e);mn(r,t),e.style.transform=_n(r)},_n=e=>e.sort(Qo).reduce(Yo,"").trim(),Yo=(e,t)=>`${e} ${t}(var(${We(t)}))`,it=e=>e.startsWith("--"),Pt=new Set;function ea(e){if(!Pt.has(e)){Pt.add(e);try{const{syntax:t,initialValue:r}=de.has(e)?de.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const Ye=(e,t)=>document.createElement("div").animate(e,t),Rt={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Ye({opacity:[1]})}catch{return!1}return!0},finished:()=>Boolean(Ye({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{Ye({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},et={},ie={};for(const e in Rt)ie[e]=()=>(et[e]===void 0&&(et[e]=Rt[e]()),et[e]);const ta=.015,na=(e,t)=>{let r="";const o=Math.round(t/ta);for(let a=0;a<o;a++)r+=e(wt(0,o-1,a))+", ";return r.substring(0,r.length-2)},jt=(e,t)=>xe(e)?ie.linearEasing()?`linear(${na(e,t)})`:L.easing:yn(e)?ra(e):e,ra=([e,t,r,o])=>`cubic-bezier(${e}, ${t}, ${r}, ${o})`;function oa(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const aa=e=>Array.isArray(e)?e:[e];function st(e){return ue[e]&&(e=ue[e]),yt(e)?We(e):e}const Ce={get:(e,t)=>{t=st(t);let r=it(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const o=de.get(t);o&&(r=o.initialValue)}return r},set:(e,t,r)=>{t=st(t),it(t)?e.style.setProperty(t,r):e.style[t]=r}};function ia(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function sa(e,t){var r;let o=(t==null?void 0:t.toDefaultUnit)||G;const a=e[e.length-1];if(Lo(a)){const s=((r=a.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(o=i=>i+s)}return o}function la(){return window.__MOTION_DEV_TOOLS_RECORD}function ca(e,t,r,o={},a){const s=la(),i=o.record!==!1&&s;let l,{duration:u=L.duration,delay:c=L.delay,endDelay:g=L.endDelay,repeat:d=L.repeat,easing:h=L.easing,direction:f,offset:b,allowWebkitAcceleration:p=!1}=o;const w=$n(e),C=yt(t);let E=ie.waapi();C&&Jo(e,t);const x=st(t),N=Wo(w.values,x),D=de.get(x);return ia(N.animation,!(at(h)&&N.generator)&&o.record!==!1),()=>{const Z=()=>{var y,we;return(we=(y=Ce.get(e,x))!==null&&y!==void 0?y:D==null?void 0:D.initialValue)!==null&&we!==void 0?we:0};let m=oa(aa(r),Z);const I=sa(m,D);if(at(h)){const y=h.createAnimation(m,t!=="opacity",Z,x,N);h=y.easing,m=y.keyframes||m,u=y.duration||u}if(it(x)&&(ie.cssRegisterProperty()?ea(x):E=!1),C&&!ie.linearEasing()&&(xe(h)||se(h)&&h.some(xe))&&(E=!1),E){D&&(m=m.map(J=>Se(J)?D.toDefaultUnit(J):J)),m.length===1&&(!ie.partialKeyframes()||i)&&m.unshift(Z());const y={delay:Ze.ms(c),duration:Ze.ms(u),endDelay:Ze.ms(g),easing:se(h)?void 0:jt(h,u),direction:f,iterations:d+1,fill:"both"};l=e.animate({[x]:m,offset:b,easing:se(h)?h.map(J=>jt(J,u)):void 0},y),l.finished||(l.finished=new Promise((J,kn)=>{l.onfinish=J,l.oncancel=kn}));const we=m[m.length-1];l.finished.then(()=>{Ce.set(e,x,we),l.cancel()}).catch(bn),p||(l.playbackRate=1.000001)}else if(a&&C)m=m.map(y=>typeof y=="string"?parseFloat(y):y),m.length===1&&m.unshift(parseFloat(Z())),l=new a(y=>{Ce.set(e,x,I?I(y):y)},m,Object.assign(Object.assign({},o),{duration:u,easing:h}));else{const y=m[m.length-1];Ce.set(e,x,D&&Se(y)?D.toDefaultUnit(y):y)}return i&&s(e,t,m,{duration:u,delay:c,easing:h,repeat:d,offset:b},"motion-one"),N.setAnimation(l),l}}const ua=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function da(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function Sn(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r}const ha={any:0,all:1};function ga(e,t,{root:r,margin:o,amount:a="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const s=da(e),i=new WeakMap,l=c=>{c.forEach(g=>{const d=i.get(g.target);if(g.isIntersecting!==Boolean(d))if(g.isIntersecting){const h=t(g);xe(h)?i.set(g.target,h):u.unobserve(g.target)}else d&&(d(g),i.delete(g.target))})},u=new IntersectionObserver(l,{root:r,rootMargin:o,threshold:typeof a=="number"?a:ha[a]});return s.forEach(c=>u.observe(c)),()=>u.disconnect()}function fa(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!ma(e,t):e!==t}function ma(e,t){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function pa(e){return typeof e=="object"}function Dt(e,t){if(pa(e))return e;if(e&&t)return t[e]}let X;function va(){if(!X)return;const e=X.sort(wa).map(ya);e.forEach(It),e.forEach(It),X=void 0}function tt(e){X?mn(X,e):(X=[e],requestAnimationFrame(va))}function ba(e){X&&Po(X,e)}const wa=(e,t)=>e.getDepth()-t.getDepth(),ya=e=>e.animateUpdates(),It=e=>e.next(),Lt=(e,t)=>new CustomEvent(e,{detail:{target:t}});function lt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:r}}))}function Vt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:r}}))}const Ca={isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:r},{inViewOptions:o={}})=>{const{once:a}=o,s=Sn(o,["once"]);return ga(e,i=>{if(t(),Vt(e,"viewenter",i),!a)return l=>{r(),Vt(e,"viewleave",l)}},s)}},Bt=(e,t,r)=>o=>{o.pointerType&&o.pointerType!=="mouse"||(r(),lt(e,t,o))},$a={isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:r})=>{const o=Bt(e,"hoverstart",t),a=Bt(e,"hoverend",r);return e.addEventListener("pointerenter",o),e.addEventListener("pointerleave",a),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",a)}}},_a={isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:r})=>{const o=s=>{r(),lt(e,"pressend",s),window.removeEventListener("pointerup",o)},a=s=>{t(),lt(e,"pressstart",s),window.addEventListener("pointerup",o)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a),window.removeEventListener("pointerup",o)}}},Fe={inView:Ca,hover:$a,press:_a},zt=["initial","animate",...Object.keys(Fe),"exit"],ct=new WeakMap;function Sa(e={},t){let r,o=t?t.getDepth()+1:0;const a={initial:!0,animate:!0},s={},i={};for(const p of zt)i[p]=typeof e[p]=="string"?e[p]:t==null?void 0:t.getContext()[p];const l=e.initial===!1?"animate":"initial";let u=Dt(e[l]||i[l],e.variants)||{},c=Sn(u,["transition"]);const g=Object.assign({},c);function*d(){var p,w;const C=c;c={};const E={};for(const m of zt){if(!a[m])continue;const I=Dt(e[m]);if(!!I)for(const y in I)y!=="transition"&&(c[y]=I[y],E[y]=ua((w=(p=I.transition)!==null&&p!==void 0?p:e.transition)!==null&&w!==void 0?w:{},y))}const x=new Set([...Object.keys(c),...Object.keys(C)]),N=[];x.forEach(m=>{var I;c[m]===void 0&&(c[m]=g[m]),fa(C[m],c[m])&&((I=g[m])!==null&&I!==void 0||(g[m]=Ce.get(r,m)),N.push(ca(r,m,c[m],E[m],No)))}),yield;const D=N.map(m=>m()).filter(Boolean);if(!D.length)return;const Z=c;r.dispatchEvent(Lt("motionstart",Z)),Promise.all(D.map(m=>m.finished)).then(()=>{r.dispatchEvent(Lt("motioncomplete",Z))}).catch(bn)}const h=(p,w)=>()=>{a[p]=w,tt(b)},f=()=>{for(const p in Fe){const w=Fe[p].isActive(e),C=s[p];w&&!C?s[p]=Fe[p].subscribe(r,{enable:h(p,!0),disable:h(p,!1)},e):!w&&C&&(C(),delete s[p])}},b={update:p=>{!r||(e=p,f(),tt(b))},setActive:(p,w)=>{!r||(a[p]=w,tt(b))},animateUpdates:d,getDepth:()=>o,getTarget:()=>c,getOptions:()=>e,getContext:()=>i,mount:p=>(r=p,ct.set(r,b),f(),()=>{ct.delete(r),ba(b);for(const w in s)s[w]()}),isMounted:()=>Boolean(r)};return b}function xa(e){const t={},r=[];for(let o in e){const a=e[o];yt(o)&&(ue[o]&&(o=ue[o]),r.push(o),o=We(o));let s=Array.isArray(a)?a[0]:a;const i=de.get(o);i&&(s=Se(a)?i.toDefaultUnit(a):a),t[o]=s}return r.length&&(t.transform=_n(r)),t}const Ma={initial:()=>!0,addCleanup:O,addMount:on},ut=rn(),xn=rn(Ma);function ka(e,t,r,o){const{addCleanup:a,addMount:s,initial:i}=r,l=Sa(i()?t():{...t(),initial:!1},o);return s(Gn.bind(void 0,Xn(),()=>{a(l.mount(e())),Yt(()=>l.update(t()))})),l}const Oa=/([^:; ]*):\s*([^;]*)/g;function Ht(e){const t={};let r;for(;r=Oa.exec(e);)t[r[1]]=r[2];return t}function Ea(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const r=typeof e=="object"?e:Ht(e),o=typeof t=="object"?t:Ht(t);return{...r,...o}}const Ut=e=>{const[t,,r]=Qn(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),o=ka(()=>s,()=>({...t}),$t(xn),$t(ut)),a=xa(o.getTarget());let s;return n(ut.Provider,{value:o,get children(){return n(en,Ue({ref:i=>{var l;s=i,(l=e.ref)==null||l.call(e,i)},get component(){return an(()=>e.tag||"div")},get style(){return Ie(()=>!!e.style,!0)()?Ea(e.style,a):a},get["on:motionstart"](){return e.onMotionStart},get["on:motioncomplete"](){return e.onMotionComplete},get["on:hoverstart"](){return e.onHoverStart},get["on:hoverend"](){return e.onHoverEnd},get["on:pressstart"](){return e.onPressStart},get["on:pressend"](){return e.onPressEnd},get["on:viewenter"](){return e.onViewEnter},get["on:viewleave"](){return e.onViewLeave}},r))}})},Mn=new Proxy(Ut,{get:(e,t)=>r=>(delete r.tag,n(Ut,Ue(r,{tag:t})))}),Ta=e=>(e=Array.isArray(e)?e[0]:e,e instanceof Element?e:void 0),Aa=(e,t)=>{const r={once:!0};e.addEventListener("motioncomplete",t,r),O(e.removeEventListener.bind(e,"motioncomplete",t,r))},Fa=e=>{let{initial:t=!0}=e;on(()=>t=!0);let r=!1,o=[],a=[],s=[];return O(()=>{s.concat(a).forEach(i=>i()),a=s=o=[]}),n(xn.Provider,{value:{addCleanup:i=>a.push(i),addMount:i=>o.push(i),initial:()=>t},get children(){return n(ut.Provider,{value:void 0,get children(){return an(()=>{const i=Zn(()=>e.children),l=ae(()=>Ta(i())),[u,c]=re(),[g,d]=re();return Jn(dt(l,b=>{s.push(...a),a=[],Yn(()=>{e.exitBeforeEnter?(c(),f(()=>!r&&h(b))):(h(b),f())})})),[u,g];function h(b){c(b),o.forEach(p=>p()),o=[]}function f(b){var E;const p=()=>{d(),s.forEach(x=>x()),s=[],b==null||b()},w=d((E=u())!=null?E:g());if(!w)return p();const C=ct.get(w);if(!C||!C.getOptions().exit)return p();C.setActive("exit",r=!0),Aa(w,()=>{r=!1,p()})}})}})}})},Pa=()=>{const e=ae(()=>[$.Folder,$.FetchingMore].includes(M.state)&&er()&&tr());return n(Fa,{exitBeforeEnter:!0,get children(){return n(_,{get when(){return e()},get children(){return n(Te,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return Mn.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return n(q,{p:"$2",get bgColor(){return He("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[n(ze,{each:["rename","move","copy","delete"],children:t=>n(Le,{name:t,onClick:()=>{v.emit("tool",t)}})}),n(Oo,{}),n(To,{}),n(Le,{name:"cancel_select",onClick:()=>{nr(!1)}})]}})}})}})}})},Ra=()=>{const{isOpen:e,onToggle:t}=F({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=ae(()=>e()?"$4":"$5"),o=ae(()=>M.state===$.Folder),{refresh:a}=j();return n(Te,{class:"left-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return n(_,{get when(){return e()},get fallback(){return n(P,{class:"toolbar-toggle",as:St,onClick:()=>{t()}})},get children(){return n(oe,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return Mn.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[n(oe,{spacing:"$1",class:"left-toolbar-in",get children(){return[n(_,{get when(){return Ie(()=>!!o(),!0)()&&(_t("write")||M.write)},get children(){return[n(P,{as:Kr,tips:"refresh",onClick:()=>{a(void 0,!0)}}),n(P,{get as(){return W.new_file.icon},tips:"new_file",onClick:()=>{v.emit("tool","new_file")}}),n(P,{get as(){return W.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{v.emit("tool","mkdir")}}),n(P,{get as(){return W.recursive_move.icon},tips:"recursive_move",onClick:()=>{v.emit("tool","recursiveMove")}}),n(P,{get as(){return W.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{v.emit("tool","removeEmptyDirectory")}}),n(P,{get as(){return W.regex_rename.icon},tips:"regex_rename",onClick:()=>{v.emit("tool","regexRename")}}),n(P,{as:rr,tips:"upload",onClick:()=>{v.emit("tool","upload")}})]}}),n(_,{get when(){return Ie(()=>!!o(),!0)()&&_t("offline_download")},get children(){return n(P,{as:or,pl:"0",tips:"offline_download",onClick:()=>{v.emit("tool","offline_download")}})}}),n(P,{tips:"toggle_checkbox",as:$o,onClick:ar}),n(P,{as:ir,tips:"local_settings",onClick:()=>{v.emit("tool","local_settings")}})]}}),n(P,{tips:"more",as:St,onClick:t})]}})}})}})},ja=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(Er),{pathname:s}=A(),{refresh:i}=j(),l=u=>{u==="copy"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(bt,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async u=>{const c=await a(s(),u,le().map(g=>g.name));B(c,()=>{i(),r()})}})},Da=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(Tr),{pathname:s}=A(),{refresh:i}=j(),l=u=>{u==="move"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(bt,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async u=>{const c=await a(s(),u,le().map(g=>g.name));B(c,()=>{i(),r()})}})},Ia=ke("<p></p>"),La=()=>{const e=S(),{isOpen:t,onOpen:r,onClose:o}=F(),[a,s]=R(Ar),{refresh:i}=j(),{pathname:l}=A(),u=c=>{c==="delete"&&r()};return v.on("tool",u),O(()=>{v.off("tool",u)}),n(pe,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[n(he,{}),n(ge,{get children(){return[n(fe,{get children(){return e("home.toolbar.delete")}}),n(me,{get children(){const c=Ia.cloneNode(!0);return _e(c,()=>e("home.toolbar.delete-tips")),c}}),n(Me,{display:"flex",gap:"$2",get children(){return[n(V,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(V,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const c=await s(l(),le().map(g=>g.name));B(c,()=>{i(),o()})},get children(){return e("global.confirm")}})]}})]}})]}})},Va=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),o=S(),[a,s]=R(Fr),{pathname:i}=A(),{refresh:l}=j(),u=c=>{if(c==="rename"){if(!sr()){K.warning(o("home.toolbar.only_one-tips"));return}t()}};return v.on("tool",u),O(()=>{v.off("tool",u)}),n(_,{get when(){return e()},get children(){return n(Ne,{title:"home.toolbar.input_new_name",get opened(){return e()},onClose:r,get defaultValue(){var c,g;return(g=(c=le()[0])==null?void 0:c.name)!=null?g:""},get loading(){return a()},onSubmit:async c=>{const g=await s(Be(i(),le()[0].name),c);B(g,()=>{l(),r()})}})}})},Ba=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(Pr),{refresh:s}=j(),{pathname:i}=A(),l=u=>{u==="new_file"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(Ne,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async u=>{const c=await a(Be(i(),u),nt());B(c,()=>{s(),r()})}})},za=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(Rr),{pathname:s}=A(),{refresh:i}=j(),l=u=>{u==="mkdir"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(Ne,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async u=>{const c=await a(Be(s(),u));B(c,()=>{i(),r()})}})},Ha=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(jr),{pathname:s}=A(),{refresh:i}=j(),l=u=>{u==="recursiveMove"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(bt,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async u=>{const c=await a(s(),u);B(c,()=>{i(),r()})}})},Ua=ke("<p></p>"),Na=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),{pathname:o}=A(),[a,s]=R(Dr),{refresh:i}=j(),l=c=>{c==="removeEmptyDirectory"&&t()};v.on("tool",l),O(()=>{v.off("tool",l)});const u=S();return n(pe,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[n(he,{}),n(ge,{get children(){return[n(fe,{get children(){return u("home.toolbar.remove_empty_directory")}}),n(me,{get children(){const c=Ua.cloneNode(!0);return _e(c,()=>u("home.toolbar.remove_empty_directory-tips")),c}}),n(Me,{display:"flex",gap:"$2",get children(){return[n(V,{onClick:r,colorScheme:"neutral",get children(){return u("global.cancel")}}),n(V,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const c=await s(o());B(c,()=>{i(),r()})},get children(){return u("global.confirm")}})]}})]}})]}})},qa=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),[o,a]=R(Ir),{pathname:s}=A(),{refresh:i}=j(),l=u=>{u==="regexRename"&&t()};return v.on("tool",l),O(()=>{v.off("tool",l)}),n(eo,{title:"home.toolbar.regular_rename",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async(u,c)=>{const g=await a(s(),u,c);B(g,()=>{i(),r()})}})},Wa=()=>{const e=S(),[t,r]=re("aria2"),{isOpen:o,onOpen:a,onClose:s}=F(),[i,l]=R(Lr),{pathname:u}=A(),c=g=>{g==="offline_download"&&a()};return v.on("tool",c),O(()=>{v.off("tool",c)}),n(Ne,{title:"home.toolbar.offline_download",type:"text",get opened(){return o()},onClose:s,get loading(){return i()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return n(Te,{mb:"$2",get children(){return n(lr,{get value(){return t()},onChange:g=>r(g),options:[{value:"aria2",label:"Aria2"},{value:"qbit",label:"qBittorrent"}]})}})},onSubmit:async g=>{const d=await l(u(),g.split(`
`),t());B(d,()=>{s()})}})},Ka=e=>{const t=S(),r=i=>{i===e.name&&a()};v.on("tool",r),O(()=>{v.off("tool",r)});const{isOpen:o,onOpen:a,onClose:s}=F();return n(pe,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:s,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[n(he,{}),n(ge,{get children(){return[n(cr,{}),n(fe,{get children(){return t(e.title)}}),n(me,{get children(){return n(_,{get when(){return o()},get children(){return n(ht,{get fallback(){return n(Re,{})},get children(){return e.children}})}})}})]}})]}})},Ga=e=>{const t=S();return n(Cr,{get children(){return[n(wr,{get children(){return t(`home.local_settings.${e.name}`)}}),n(Pe,{get value(){return Xt[e.name]},onInput:r=>{yr(e.name,r.currentTarget.value)}})]}})},Xa=()=>{const{isOpen:e,onOpen:t,onClose:r}=F(),o=S(),a=s=>{s==="local_settings"&&t()};return v.on("tool",a),O(()=>{v.off("tool",a)}),n(br,{get opened(){return e()},placement:"right",onClose:r,get children(){return[n(ur,{}),n(dr,{get children(){return[n(hr,{}),n(gr,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),n(fr,{get children(){return[n(oe,{spacing:"$2",get children(){return n(ze,{get each(){return Object.keys(mr)},children:s=>n(Ga,{name:s})})}}),n(tn,{mt:"$4",get children(){return n(q,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[n(pr,{}),n(vr,{})]}})}})]}})]}})]}})},Qa=Oe(()=>Ee(()=>import("./Upload.adc54b22.js"),["assets/Upload.adc54b22.js","assets/index.6067d580.js","assets/index.15d8d646.css","assets/index.cfe5736a.js"])),Za=()=>[n(ja,{}),n(Da,{}),n(Va,{}),n(La,{}),n(Ba,{}),n(za,{}),n(Ha,{}),n(Na,{}),n(qa,{}),n(Wa,{}),n(Fo,{}),n(Ka,{name:"upload",title:"home.toolbar.upload",get children(){return n(Qa,{})}}),n(Xa,{})],Ja=()=>n($r,{get children(){return[n(Ra,{}),n(Pa,{}),n(Za,{})]}}),Ya=()=>{xr(ce("site_title"));const e=ce("announcement");return e&&K.render(()=>n(cn,{children:e})),[n(Co,{}),n(Ja,{}),n(so,{}),n(co,{})]},di=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"}));export{ui as I,di as L,Mn as M,ci as T,j as a,Qr as b,li as g,yo as i,W as o,Jr as u};
